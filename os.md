# 操作系统

## 进程通信方式

**管道（匿名管道）**

管道其实是一个在内核内存中维护的缓冲器，这个缓冲器的存储能力是有限的，不同的操作系统大小不一定相同。

管道拥有文件的特质、读操作、写操作，**匿名管道没有文件实体，有名管道有文件实体**，但不存储数据。可以按照操作文件的方式对管道进行操作。

一个管道是一个字节流，使用管道时不存在消息或者消息边界的概念，从管道读取数据的进程可以读取任意大小的据块而不管写入进程写入管道的数据块的大小是多少。

通过管道传递的数据是顺序的，从管道中读取出来的字节的顺序和它们被写入管道的顺序是完全一样的

在管道中的数据的传递方向是单向的，一端用于写入，一端用于读取，管道是半双工的。

从管道读数据是一次性操作，数据一旦被读走，它就从管道中被抛弃，释放空间以便写更多的数据，在管道中无法使用lseek()来随机的访问数据。

匿名管道只能在具有公共祖先的进程（父进程与子进程，或者两个兄弟进程，具有亲缘关系）之间使用。

数据结构：环形队列。

管道默认是阻塞的，如果为空，read阻塞，如果为满，write阻塞。

**FIFO**

匿名管道，由于没有名字，只能用于亲缘关系的进程间通信。为了克服这个缺点，提出了有名管道(FIFO)，也叫命名管道、FIFO文件。

有名管道(FIFO)不同于匿名管道之处在于它提供了一个路径名与之关联，以FIFO的文件形式存在于文件系统中，并且其打开方式与打开一个普通文件是一样的，这样即使与FIFO的创建进程不存在亲缘关系的进程，只要可以访问该路径，就能够彼此通过FIFO相互通信，因此，通过FIFO不相关的进程也能交换数据一旦打开了FIFO，就能在它上面使用与操作匿名管道和其他文件的系统调用一样的I/O系统调用了（如read()、write()和close())。

与管道一样，FIFO也有一个写入端和读取端，并且从管道中读取数据的顺序与写入的顺序是一样的。FIFO的名称也由此而来：先入先出。

有名管道（FIFO）和匿名管道(pipe)有一些特点是相同的（维护的都是内存中的一块缓冲区），不一样的地方在于：

1·FIF0在文件系统中作为一个特殊文件存在，但FIFO中的内容却存放在内存中。

2·当使用FIFO的进程退出后，FIFO文件将继续保存在文件系统中以便以后使用。

3·FIFO有名字，不相关的进程可以通过打开有名管道进行通信。

**内存映射**

内存映射(Memory-mappedI/O)是将磁盘文件的数据映射到内存，用户通过修改内存就能修改磁盘文件。

内存映射区通信非阻塞。

**消息队列**

**信号量**



**共享内存**

